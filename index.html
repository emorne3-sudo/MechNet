<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MECHNET | Industrial Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body class="bg-black text-zinc-100 font-sans">

    <header class="p-6 border-b border-yellow-500/30 flex justify-between items-center">
        <div>
            <h1 class="text-2xl font-black tracking-tighter text-yellow-500">MECHNET</h1>
            <p class="text-[10px] text-zinc-500 uppercase font-bold">Industrial Knowledge Hub</p>
        </div>
        <div class="bg-zinc-900 px-3 py-1 rounded border border-zinc-800 text-[10px] font-bold text-green-500 animate-pulse">
            SYSTEM ONLINE
        </div>
    </header>

    <section class="p-6 bg-zinc-950 border-b border-zinc-900">
        <div class="bg-zinc-900/50 border border-blue-500/30 p-4 rounded-xl">
            <h3 class="text-blue-500 font-black text-xs uppercase mb-2">MechBot AI Assistant</h3>
            <input id="ai-input" type="text" placeholder="Ask for torque specs or diagnostics..." 
                class="w-full bg-black border border-zinc-800 rounded p-3 text-sm focus:border-yellow-500 outline-none">
            <button onclick="askAI()" class="mt-2 w-full bg-blue-600 text-white font-bold py-2 rounded text-xs uppercase">Ask MechBot</button>
            <div id="ai-response" class="mt-3 text-sm text-zinc-400 italic"></div>
        </div>
    </section>

    <main class="p-6">
        <h3 class="text-yellow-500 font-black text-xs uppercase mb-4">Live Shop Floor Feed</h3>
        <div id="feed" class="space-y-4">
            <div class="bg-zinc-900 p-4 rounded-lg border border-zinc-800">
                <p class="text-xs text-zinc-500 mb-1 font-bold">SYSTEM MESSAGE</p>
                <p class="text-sm">Welcome to MechNet. Knowledge sharing is power.</p>
            </div>
        </div>
    </main>

    <script>
        // Connect to your backend (We will update this URL once Render is live)
        const socket = io();

        async function askAI() {
            const input = document.getElementById('ai-input');
            const responseDiv = document.getElementById('ai-response');
            responseDiv.innerText = "Analyzing technical data...";
            
            const res = await fetch('/ask-mechbot', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ question: input.value })
            });
            const data = await res.json();
            responseDiv.innerText = data.answer;
        }

        socket.on('receive_knowledge', (data) => {
            const feed = document.getElementById('feed');
            const item = `<div class="bg-zinc-900 p-4 rounded-lg border border-zinc-800">
                <p class="text-xs text-yellow-600 mb-1 font-bold italic">FIELD REPORT</p>
                <p class="text-sm">${data}</p>
            </div>`;
            feed.innerHTML = item + feed.innerHTML;
        });
    </script>
</body>
</html>
